{{define "base"}}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="/static/favicon.png" type="image/png">
  {{block "meta" .}}{{end}}
  <title>{{block "title" .}}mojira.dev{{end}}</title>
  <link rel="stylesheet" href="/static/reset.css">
  <link rel="stylesheet" href="/static/style.css">
  <script src="https://unpkg.com/htmx.org@2.0.4/dist/htmx.min.js"></script>
  <script>
    (function () {
      const stored = localStorage.getItem('theme')
      const system = window.matchMedia('(prefers-color-scheme: dark)').matches
      if (stored === 'dark' || (!stored && system) || (stored === 'system' && system)) {
        document.documentElement.setAttribute('data-theme', 'dark')
      } else {
        document.documentElement.setAttribute('data-theme', 'light')
      }
    })()
  </script>
</head>
<body>
  <header>
    <a class="header-main" href="/">mojira.dev</a>
    <div class="search">
      <input type="text" name="search" placeholder="Search" autocomplete="off" hx-post="/api/search" hx-trigger="input delay:0.2s" hx-target="#search-results">
      <div id="search-results" class="search-results"></div>
    </div>
    <details class="theme-dropdown">
      <summary class="theme-toggle" aria-label="Theme options">
        {{ icon "sun" }}
      </summary>
      <div class="theme-menu">
        <button class="theme-option" data-value="light" onclick="setTheme('light')">
          {{ icon "sun" }}
          Light
        </button>
        <button class="theme-option" data-value="dark" onclick="setTheme('dark')">
          {{ icon "moon" }}
          Dark
        </button>
        <button class="theme-option" data-value="system" onclick="setTheme('system')">
          {{ icon "monitor" }}
          System
        </button>
      </div>
    </details>
  </header>

  <div class="content {{block "content-class" .}}{{end}}">
    {{block "content" .}}{{end}}
  </div>

  <footer>
    <p>Not an official Minecraft website. Not approved by or associated with Mojang or Microsoft.</p>
    <p>
      <a href="https://github.com/misode/mojira.dev" target="_blank">
        {{ icon "mark-github" }}
        misode/mojira.dev
      </a>
    </p>
    <p>
      <a href="https://bsky.app/profile/misode.dev" target="_blank">
        {{ icon "mark-bluesky" }}
        @misode.dev
      </a>
    </p>
  </footer>

  <script src="/static/main.js"></script>
</body>
</html>
{{end}}
